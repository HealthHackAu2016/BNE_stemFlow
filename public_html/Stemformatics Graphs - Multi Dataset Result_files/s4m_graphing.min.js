(function(d){var k={series:{bandwidth:{active:false,show:false,fill:true,lineWidth:4,highlight:{opacity:0.5},drawBandwidth:b}}};function b(m,q,l,p,o,n){m.beginPath();m.strokeStyle=n;m.lineWidth=q.lineWidth;m.lineCap="round";m.moveTo(l,p);m.lineTo(l,o);m.stroke()}var e=null,a=null,g=null,h=null,c=null,f=[];function j(o){o.hooks.processOptions.push(r);function r(t,s){if(s.series.bandwidth.active){t.hooks.draw.push(l);t.hooks.bindEvents.push(q);t.hooks.drawOverlay.push(n)}}function l(w,s){var v;a=w.getCanvas();g=d(a).parent();h=w.getAxes();c=w.getPlotOffset();e=w.getData();for(var u=0;u<e.length;u++){v=e[u];if(v.bandwidth.show){for(var t=0;t<v.data.length;t++){m(s,v.data[t],v.bandwidth,v.color,false)}}}}function m(t,A,y,u,z){var s,w,v;s=c.left+h.xaxis.p2c(A[0]);w=c.top+h.yaxis.p2c(A[1]);v=c.top+h.yaxis.p2c(A[2]);y.drawBandwidth(t,y,s,w,v,u,z)}function q(u,s){var t=u.getOptions()}function p(w,D,C){var u,s;e=w.getData();h=w.getAxes();for(var v=0;v<e.length;v++){u=e[v];if(u.bandwidth.show){for(var t=0;t<u.data.length;t++){var B,A,z,y;y=u.data[t];B=h.xaxis.p2c(y[0])-u.bandwidth.lineWidth/2;A=h.yaxis.p2c(y[1]);z=h.yaxis.p2c(y[2]);if(D>=B&&D<=(B+u.bandwidth.lineWidth)){if(A<z){if(C>A&&C<z){s={i:v,j:t}}}else{if(C>z&&C<A){s={i:v,j:t}}}}}}}return s}function n(t,u){u.save();u.clearRect(0,0,g.width(),g.height());for(i=0;i<f.length;++i){s(f[i])}u.restore();function s(v){var w="rgba(255, 255, 255, "+v.series.bandwidth.highlight.opacity+")";m(u,v.point,v.series.bandwidth,w,true)}}}d.plot.plugins.push({init:j,options:k,name:"bandwidth",version:"0.4"})})(jQuery);(function(a){function b(c){c.hooks.processDatapoints.push(function(f,d,e){if(!d.dashes.show){return}f.hooks.draw.push(function(l,p){var g=l.getPlotOffset(),o=d.xaxis,m=d.yaxis;function k(y,x){var D=e.points,C=e.pointsize,A=null,z=null,B=0,u=true,J,q;if(d.dashes.dashLength[0]){J=d.dashes.dashLength[0];if(d.dashes.dashLength[1]){q=d.dashes.dashLength[1]}else{q=J}}else{q=J=d.dashes.dashLength}p.beginPath();for(var E=C;E<D.length;E+=C){var I=D[E-C],t=D[E-C+1],G=D[E],s=D[E+1];if(I==null||G==null){continue}if(t<=s&&t<m.min){if(s<m.min){continue}I=(m.min-t)/(s-t)*(G-I)+I;t=m.min}else{if(s<=t&&s<m.min){if(t<m.min){continue}G=(m.min-t)/(s-t)*(G-I)+I;s=m.min}}if(t>=s&&t>m.max){if(s>m.max){continue}I=(m.max-t)/(s-t)*(G-I)+I;t=m.max}else{if(s>=t&&s>m.max){if(t>m.max){continue}G=(m.max-t)/(s-t)*(G-I)+I;s=m.max}}if(I<=G&&I<o.min){if(G<o.min){continue}t=(o.min-I)/(G-I)*(s-t)+t;I=o.min}else{if(G<=I&&G<o.min){if(I<o.min){continue}s=(o.min-I)/(G-I)*(s-t)+t;G=o.min}}if(I>=G&&I>o.max){if(G>o.max){continue}t=(o.max-I)/(G-I)*(s-t)+t;I=o.max}else{if(G>=I&&G>o.max){if(I>o.max){continue}s=(o.max-I)/(G-I)*(s-t)+t;G=o.max}}if(I!=A||t!=z){p.moveTo(o.p2c(I)+y,m.p2c(t)+x)}var w=o.p2c(I)+y,H=m.p2c(t)+x,v=o.p2c(G)+y,F=m.p2c(s)+x,K;function r(N){var O=Math.sqrt(Math.pow(v-w,2)+Math.pow(F-H,2));if(O<=N){return{deltaX:v-w,deltaY:F-H,distance:O,remainder:N-O}}else{var M=v>w?1:-1,L=F>H?1:-1;return{deltaX:M*Math.sqrt(Math.pow(N,2)/(1+Math.pow((F-H)/(v-w),2))),deltaY:L*Math.sqrt(Math.pow(N,2)-Math.pow(N,2)/(1+Math.pow((F-H)/(v-w),2))),distance:N,remainder:0}}}do{K=r(B>0?B:u?J:q);if(K.deltaX!=0||K.deltaY!=0){if(u){p.lineTo(w+K.deltaX,H+K.deltaY)}else{p.moveTo(w+K.deltaX,H+K.deltaY)}}u=!u;B=K.remainder;w+=K.deltaX;H+=K.deltaY}while(K.distance>0);A=G;z=s}p.stroke()}p.save();p.translate(g.left,g.top);p.lineJoin="round";var h=d.dashes.lineWidth,n=d.shadowSize;if(h>0&&n>0){p.lineWidth=n;p.strokeStyle="rgba(0,0,0,0.1)";var j=Math.PI/18;k(Math.sin(j)*(h/2+n/2),Math.cos(j)*(h/2+n/2));p.lineWidth=n/2;k(Math.sin(j)*(h/2+n/4),Math.cos(j)*(h/2+n/4))}p.lineWidth=h;p.strokeStyle=d.color;if(h>0){k(0,0)}p.restore()})})}a.plot.plugins.push({init:b,options:{series:{dashes:{show:false,lineWidth:2,dashLength:10}}},name:"dashes",version:"0.1"})})(jQuery);function HighLighting(l,m,o,f,h){var q=o;var r=l.getOptions();var c=l.getCanvas();var k=$(c).parent();var g=l.getData();if(f&&r.grid.hoverable){m.unbind("mousemove").mousemove(b)}if(f&&r.grid.clickable){m.unbind("click").click(n)}function b(s){a("plothover",s)}function n(s){a("plotclick",s)}function a(t,z){var s;var B;var w=l.offset();var v=parseInt(z.pageX-w.left);var u=parseInt(z.pageY-w.top);s=q(l,v,u);if(s){B=j(s.i,s.j)}if(r.grid.autoHighlight){for(var x=0;x<h.length;++x){var y=h[x];if(y.auto&&!(B&&y.series==B.series&&y.point==B.datapoint)){p(y.series,y.point)}}}if(B){e(B.series,B.datapoint,t)}var A={pageX:z.pageX,pageY:z.pageY};k.trigger(t,[A,B])}function j(t,s){var u;u={datapoint:g[t].data[s],dataIndex:s,series:g[t],seriesIndex:t};return u}function e(v,t,w){if(typeof v=="number"){v=series[v]}if(typeof t=="number"){t=v.data[t]}var u=d(v,t);if(u==-1){h.push({series:v,point:t,auto:w});l.triggerRedrawOverlay()}else{if(!w){h[u].auto=false}}}function p(v,t){if(typeof v=="number"){v=series[v]}if(typeof t=="number"){t=v.data[t]}var u=d(v,t);if(u!=-1){h.splice(u,1);l.triggerRedrawOverlay()}}function d(v,w){for(var t=0;t<h.length;++t){var u=h[t];if(u.series==v&&u.point[0]==w[0]&&u.point[1]==w[1]){return t}}return -1}}(function(j){j.fn.drag=function(k,l,m){if(l){this.bind("dragstart",k)}if(m){this.bind("dragend",m)}return !k?this.trigger("drag"):this.bind("drag",l?l:k)};var d=j.event,c=d.special,h=c.drag={not:":input",distance:0,which:1,dragging:false,setup:function(k){k=j.extend({distance:h.distance,which:h.which,not:h.not},k||{});k.distance=e(k.distance);d.add(this,"mousedown",f,k);if(this.attachEvent){this.attachEvent("ondragstart",a)}},teardown:function(){d.remove(this,"mousedown",f);if(this===h.dragging){h.dragging=h.proxy=false}g(this,true);if(this.detachEvent){this.detachEvent("ondragstart",a)}}};c.dragstart=c.dragend={setup:function(){},teardown:function(){}};function f(k){var l=this,m,n=k.data||{};if(n.elem){l=k.dragTarget=n.elem;k.dragProxy=h.proxy||l;k.cursorOffsetX=n.pageX-n.left;k.cursorOffsetY=n.pageY-n.top;k.offsetX=k.pageX-k.cursorOffsetX;k.offsetY=k.pageY-k.cursorOffsetY}else{if(h.dragging||(n.which>0&&k.which!=n.which)||j(k.target).is(n.not)){return}}switch(k.type){case"mousedown":j.extend(n,j(l).offset(),{elem:l,target:k.target,pageX:k.pageX,pageY:k.pageY});d.add(document,"mousemove mouseup",f,n);g(l,false);h.dragging=null;return false;case !h.dragging&&"mousemove":if(e(k.pageX-n.pageX)+e(k.pageY-n.pageY)<n.distance){break}k.target=n.target;m=b(k,"dragstart",l);if(m!==false){h.dragging=l;h.proxy=k.dragProxy=j(m||l)[0]}case"mousemove":if(h.dragging){m=b(k,"drag",l);if(c.drop){c.drop.allowed=(m!==false);c.drop.handler(k)}if(m!==false){break}k.type="mouseup"}case"mouseup":d.remove(document,"mousemove mouseup",f);if(h.dragging){if(c.drop){c.drop.handler(k)}b(k,"dragend",l)}g(l,true);h.dragging=h.proxy=n.elem=false;break}return true}function b(n,l,k){n.type=l;var m=j.event.handle.call(k,n);return m===false?false:m||n.result}function e(k){return Math.pow(k,2)}function a(){return(h.dragging===false)}function g(k,l){if(!k){return}k.unselectable=l?"off":"on";k.onselectstart=function(){return l};if(k.style){k.style.MozUserSelect=l?"":"none"}}})(jQuery);(function(f){var e=["DOMMouseScroll","mousewheel"];f.event.special.mousewheel={setup:function(){if(this.addEventListener){for(var a=e.length;a;){this.addEventListener(e[--a],d,false)}}else{this.onmousewheel=d}},teardown:function(){if(this.removeEventListener){for(var a=e.length;a;){this.removeEventListener(e[--a],d,false)}}else{this.onmousewheel=null}}};f.fn.extend({mousewheel:function(a){return a?this.bind("mousewheel",a):this.trigger("mousewheel")},unmousewheel:function(a){return this.unbind("mousewheel",a)}});function d(b){var h=[].slice.call(arguments,1),a=0,c=true;b=f.event.fix(b||window.event);b.type="mousewheel";if(b.wheelDelta){a=b.wheelDelta/120}if(b.detail){a=-b.detail/3}h.unshift(b,a);return f.event.handle.apply(this,h)}})(jQuery);(function(b){var a={xaxis:{zoomRange:null,panRange:null},zoom:{interactive:false,trigger:"dblclick",amount:1.5},pan:{interactive:false,cursor:"move",frameRate:20}};function c(p){function n(r,q){var s=p.offset();s.left=r.pageX-s.left;s.top=r.pageY-s.top;if(q){p.zoomOut({center:s})}else{p.zoom({center:s})}}function d(q,r){n(q,r<0);return false}var j="default",g=0,e=0,o=null;function f(q){if(q.which!=1){return false}var r=p.getPlaceholder().css("cursor");if(r){j=r}p.getPlaceholder().css("cursor",p.getOptions().pan.cursor);g=q.pageX;e=q.pageY}function k(r){var q=p.getOptions().pan.frameRate;if(o||!q){return}o=setTimeout(function(){p.pan({left:g-r.pageX,top:e-r.pageY});g=r.pageX;e=r.pageY;o=null},1/q*1000)}function h(q){if(o){clearTimeout(o);o=null}p.getPlaceholder().css("cursor",j);p.pan({left:g-q.pageX,top:e-q.pageY})}function m(r,q){var s=r.getOptions();if(s.zoom.interactive){q[s.zoom.trigger](n);q.mousewheel(d)}if(s.pan.interactive){q.bind("dragstart",{distance:10},f);q.bind("drag",k);q.bind("dragend",h)}}p.zoomOut=function(q){if(!q){q={}}if(!q.amount){q.amount=p.getOptions().zoom.amount}q.amount=1/q.amount;p.zoom(q)};p.zoom=function(r){if(!r){r={}}var y=r.center,s=r.amount||p.getOptions().zoom.amount,q=p.width(),u=p.height();if(!y){y={left:q/2,top:u/2}}var t=y.left/q,x=y.top/u,v={x:{min:y.left-t*q/s,max:y.left+(1-t)*q/s},y:{min:y.top-x*u/s,max:y.top+(1-x)*u/s}};b.each(p.getAxes(),function(A,D){var E=D.options,C=v[D.direction].min,w=v[D.direction].max,F=E.zoomRange;if(F===false){return}C=D.c2p(C);w=D.c2p(w);if(C>w){var B=C;C=w;w=B}var z=w-C;if(F&&((F[0]!=null&&z<F[0])||(F[1]!=null&&z>F[1]))){return}E.min=C;E.max=w});p.setupGrid();p.draw();if(!r.preventEvent){p.getPlaceholder().trigger("plotzoom",[p])}};p.pan=function(q){var r={x:+q.left,y:+q.top};if(isNaN(r.x)){r.x=0}if(isNaN(r.y)){r.y=0}b.each(p.getAxes(),function(t,v){var w=v.options,u,s,x=r[v.direction];u=v.c2p(v.p2c(v.min)+x),s=v.c2p(v.p2c(v.max)+x);var y=w.panRange;if(y===false){return}if(y){if(y[0]!=null&&y[0]>u){x=y[0]-u;u+=x;s+=x}if(y[1]!=null&&y[1]<s){x=y[1]-s;u+=x;s+=x}}w.min=u;w.max=s});p.setupGrid();p.draw();if(!q.preventEvent){p.getPlaceholder().trigger("plotpan",[p])}};function l(r,q){q.unbind(r.getOptions().zoom.trigger,n);q.unbind("mousewheel",d);q.unbind("dragstart",f);q.unbind("drag",k);q.unbind("dragend",h);if(o){clearTimeout(o)}}p.hooks.bindEvents.push(m);p.hooks.shutdown.push(l)}b.plot.plugins.push({init:c,options:a,name:"navigate",version:"1.3"})})(jQuery);(function(d){function c(x){var s={first:{x:-1,y:-1},second:{x:-1,y:-1},show:false,active:false};var v={};var a=null;function D(e){if(s.active){w(e);x.getPlaceholder().trigger("plotselecting",[B()])}}function u(e){if(e.which!=1){return}document.body.focus();if(document.onselectstart!==undefined&&v.onselectstart==null){v.onselectstart=document.onselectstart;document.onselectstart=function(){return false}}if(document.ondrag!==undefined&&v.ondrag==null){v.ondrag=document.ondrag;document.ondrag=function(){return false}}E(s.first,e);s.active=true;a=function(f){y(f)};d(document).one("mouseup",a)}function y(e){a=null;if(document.onselectstart!==undefined){document.onselectstart=v.onselectstart}if(document.ondrag!==undefined){document.ondrag=v.ondrag}s.active=false;w(e);if(C()){z()}else{x.getPlaceholder().trigger("plotunselected",[]);x.getPlaceholder().trigger("plotselecting",[null])}return false}function B(){if(!C()){return null}var e={},f=s.first,g=s.second;d.each(x.getAxes(),function(k,j){if(j.used){var l=j.c2p(f[j.direction]),h=j.c2p(g[j.direction]);e[k]={from:Math.min(l,h),to:Math.max(l,h)}}});return e}function z(){var e=B();x.getPlaceholder().trigger("plotselected",[e]);if(e.xaxis&&e.yaxis){x.getPlaceholder().trigger("selected",[{x1:e.xaxis.from,y1:e.yaxis.from,x2:e.xaxis.to,y2:e.yaxis.to}])}}function A(f,e,g){return e<f?f:(e>g?g:e)}function E(e,h){var f=x.getOptions();var g=x.getPlaceholder().offset();var j=x.getPlotOffset();e.x=A(0,h.pageX-g.left-j.left,x.width());e.y=A(0,h.pageY-g.top-j.top,x.height());if(f.selection.mode=="y"){e.x=e==s.first?0:x.width()}if(f.selection.mode=="x"){e.y=e==s.first?0:x.height()}}function w(e){if(e.pageX==null){return}E(s.second,e);if(C()){s.show=true;x.triggerRedrawOverlay()}else{b(true)}}function b(e){if(s.show){s.show=false;x.triggerRedrawOverlay();if(!e){x.getPlaceholder().trigger("plotunselected",[])}}}function F(n,j){var m,g,f,e,h=x.getAxes();for(var l in h){m=h[l];if(m.direction==j){e=j+m.n+"axis";if(!n[e]&&m.n==1){e=j+"axis"}if(n[e]){g=n[e].from;f=n[e].to;break}}}if(!n[e]){m=j=="x"?x.getXAxes()[0]:x.getYAxes()[0];g=n[j+"1"];f=n[j+"2"]}if(g!=null&&f!=null&&g>f){var k=g;g=f;f=k}return{from:g,to:f,axis:m}}function t(h,j){var f,g,e=x.getOptions();if(e.selection.mode=="y"){s.first.x=0;s.second.x=x.width()}else{g=F(h,"x");s.first.x=g.axis.p2c(g.from);s.second.x=g.axis.p2c(g.to)}if(e.selection.mode=="x"){s.first.y=0;s.second.y=x.height()}else{g=F(h,"y");s.first.y=g.axis.p2c(g.from);s.second.y=g.axis.p2c(g.to)}s.show=true;x.triggerRedrawOverlay();if(!j&&C()){z()}}function C(){var e=5;return Math.abs(s.second.x-s.first.x)>=e&&Math.abs(s.second.y-s.first.y)>=e}x.clearSelection=b;x.setSelection=t;x.getSelection=B;x.hooks.bindEvents.push(function(f,g){var e=f.getOptions();if(e.selection.mode!=null){g.mousemove(D);g.mousedown(u)}});x.hooks.drawOverlay.push(function(k,e){if(s.show&&C()){var m=k.getPlotOffset();var n=k.getOptions();e.save();e.translate(m.left,m.top);var j=d.color.parse(n.selection.color);e.strokeStyle=j.scale("a",0.8).toString();e.lineWidth=1;e.lineJoin="round";e.fillStyle=j.scale("a",0.4).toString();var g=Math.min(s.first.x,s.second.x),h=Math.min(s.first.y,s.second.y),f=Math.abs(s.second.x-s.first.x),l=Math.abs(s.second.y-s.first.y);e.fillRect(g,h,f,l);e.strokeRect(g,h,f,l);e.restore()}});x.hooks.shutdown.push(function(e,f){f.unbind("mousemove",D);f.unbind("mousedown",u);if(a){d(document).unbind("mouseup",a)}})}d.plot.plugins.push({init:c,options:{selection:{mode:null,color:"#e8cfac"}},name:"selection",version:"1.1"})})(jQuery);(function(b){function a(h,e,g){var d={square:function(l,k,o,j,n){var m=j*Math.sqrt(Math.PI)/2;l.rect(k-m,o-m,m+m,m+m)},diamond:function(l,k,o,j,n){var m=j*Math.sqrt(Math.PI/2);l.moveTo(k-m,o);l.lineTo(k,o-m);l.lineTo(k+m,o);l.lineTo(k,o+m);l.lineTo(k-m,o)},triangle:function(m,l,p,k,o){var n=k*Math.sqrt(2*Math.PI/Math.sin(Math.PI/3));var j=n*Math.sin(Math.PI/3);m.moveTo(l-n/2,p+j/2);m.lineTo(l+n/2,p+j/2);if(!o){m.lineTo(l,p-j/2);m.lineTo(l-n/2,p+j/2)}},cross:function(l,k,o,j,n){var m=j*Math.sqrt(Math.PI)/2;l.moveTo(k-m,o-m);l.lineTo(k+m,o+m);l.moveTo(k-m,o+m);l.lineTo(k+m,o-m)}};var f=e.points.symbol;if(d[f]){e.points.symbol=d[f]}}function c(d){d.hooks.processDatapoints.push(a)}b.plot.plugins.push({init:c,name:"symbols",version:"1.0"})})(jQuery);(function(f){f.fn.simpledraw=function(j,h,k){if(k&&this[0].vcanvas){return this[0].vcanvas}if(j==undefined){j=f(this).innerWidth()}if(h==undefined){h=f(this).innerHeight()}if(f.browser.hasCanvas){return new c(j,h,this)}else{if(f.browser.msie){return new d(j,h,this)}else{return false}}};var g=[];f.fn.sparkline=function(j,h){var h=f.extend({type:"line",lineColor:"#00f",fillColor:"#cdf",defaultPixelsPerValue:3,width:"auto",height:"auto",composite:false},h?h:{});return this.each(function(){var k=function(){var l=(j=="html"||j==undefined)?f(this).text().split(","):j;var n=h.width=="auto"?l.length*h.defaultPixelsPerValue:h.width;if(h.height=="auto"){if(!h.composite||!this.vcanvas){var m=document.createElement("span");m.innerHTML="a";f(this).html(m);height=f(m).innerHeight();f(m).remove()}}else{height=h.height}f.fn.sparkline[h.type].call(this,l,h,n,height)};if((f(this).html()&&f(this).is(":hidden"))||(f.fn.jquery<"1.3.0"&&f(this).parents().is(":hidden"))){g.push([this,k])}else{k.call(this)}})};f.sparkline_display_visible=function(){for(var h=g.length-1;h>=0;h--){var j=g[h][0];if(f(j).is(":visible")&&!f(j).parents().is(":hidden")){g[h][1].call(j);g.splice(h,1)}}};f.fn.sparkline.line=function(l,n,K,H){var n=f.extend({spotColor:"#f80",spotRadius:1.5,minSpotColor:"#f80",maxSpotColor:"#f80",lineWidth:1,normalRangeMin:undefined,normalRangeMax:undefined,normalRangeColor:"#ccc",chartRangeMin:undefined,chartRangeMax:undefined,chartRangeMinX:undefined,chartRangeMaxX:undefined},n?n:{});var w=[],u=[],E=[];for(N=0;N<l.length;N++){var F=l[N];var I=typeof(l[N])=="string";var r=typeof(l[N])=="object"&&l[N] instanceof Array;var O=I&&l[N].split(":");if(I&&O.length==2){w.push(Number(O[0]));u.push(Number(O[1]));E.push(Number(O[1]))}else{if(r){w.push(l[N][0]);u.push(l[N][1]);E.push(l[N][1])}else{w.push(N);if(l[N]===null||l[N]=="null"){u.push(null)}else{u.push(Number(l[N]));E.push(Number(l[N]))}}}}if(n.xvalues){w=n.xvalues}var m=Math.max.apply(Math,E);var A=m;var o=Math.min.apply(Math,E);var s=o;var p=Math.max.apply(Math,w);var t=p;var q=Math.min.apply(Math,w);var k=q;if(n.normalRangeMin!=undefined){if(n.normalRangeMin<o){o=n.normalRangeMin}if(n.normalRangeMax>m){m=n.normalRangeMax}}if(n.chartRangeMin!=undefined&&(n.chartRangeClip||n.chartRangeMin<o)){o=n.chartRangeMin}if(n.chartRangeMax!=undefined&&(n.chartRangeClip||n.chartRangeMax>m)){m=n.chartRangeMax}if(n.chartRangeMinX!=undefined&&(n.chartRangeClipX||n.chartRangeMinX<q)){q=n.chartRangeMinX}if(n.chartRangeMaxX!=undefined&&(n.chartRangeClipX||n.chartRangeMaxX>p)){p=n.chartRangeMaxX}var j=p-q==0?1:p-q;var h=m-o==0?1:m-o;var R=u.length-1;if(R<1){this.innerHTML="";return}var S=f(this).simpledraw(K,H,n.composite);if(S){var Q=S.pixel_width;var M=S.pixel_height;var T=0;var P=0;if(n.spotRadius&&(Q<(n.spotRadius*4)||M<(n.spotRadius*4))){n.spotRadius=0}if(n.spotRadius){if(n.minSpotColor||(n.spotColor&&u[R]==o)){M-=Math.ceil(n.spotRadius)}if(n.maxSpotColor||(n.spotColor&&u[R]==m)){M-=Math.ceil(n.spotRadius);T+=Math.ceil(n.spotRadius)}if(n.minSpotColor||n.maxSpotColor&&(u[0]==o||u[0]==m)){P+=Math.ceil(n.spotRadius);Q-=Math.ceil(n.spotRadius)}if(n.spotColor||(n.minSpotColor||n.maxSpotColor&&(u[R]==o||u[R]==m))){Q-=Math.ceil(n.spotRadius)}}M--;if(n.normalRangeMin!=undefined){var G=T+Math.round(M-(M*((n.normalRangeMax-o)/h)));var H=Math.round((M*(n.normalRangeMax-n.normalRangeMin))/h);S.drawRect(P,G,Q,H,undefined,n.normalRangeColor)}var J=[];var L=[J];for(var N=0,z=u.length;N<z;N++){var C=w[N],B=u[N];if(B===null){if(N){if(u[N-1]!==null){J=[];L.push(J)}}}else{if(B<o){B=o}if(B>m){B=m}if(!J.length){J.push([P+Math.round((C-q)*(Q/j)),T+M])}J.push([P+Math.round((C-q)*(Q/j)),T+Math.round(M-(M*((B-o)/h)))])}}for(var N=0,D=L.length;N<D;N++){J=L[N];if(!J.length){continue}if(n.fillColor){J.push([J[J.length-1][0],T+M-1]);S.drawShape(J,undefined,n.fillColor);J.pop()}if(J.length>2){J[0]=[J[0][0],J[1][1]]}S.drawShape(J,n.lineColor,undefined,n.lineWidth)}if(n.spotRadius&&n.spotColor){S.drawCircle(P+Math.round(w[w.length-1]*(Q/j)),T+Math.round(M-(M*((u[R]-o)/h))),n.spotRadius,undefined,n.spotColor)}if(m!=s){if(n.spotRadius&&n.minSpotColor){var C=w[u.indexOf(s)];S.drawCircle(P+Math.round((C-q)*(Q/j)),T+Math.round(M-(M*((s-o)/h))),n.spotRadius,undefined,n.minSpotColor)}if(n.spotRadius&&n.maxSpotColor){var C=w[u.indexOf(A)];S.drawCircle(P+Math.round((C-q)*(Q/j)),T+Math.round(M-(M*((A-o)/h))),n.spotRadius,undefined,n.maxSpotColor)}}}else{this.innerHTML=""}};f.fn.sparkline.bar=function(h,k,t,r){var k=f.extend({type:"bar",barColor:"#00f",negBarColor:"#f44",zeroColor:undefined,nullColor:undefined,zeroAxis:undefined,barWidth:4,barSpacing:1,chartRangeMax:undefined,chartRangeMin:undefined,chartRangeClip:false,colorMap:undefined},k?k:{});var t=(h.length*k.barWidth)+((h.length-1)*k.barSpacing);var l=[];for(var A=0,n=h.length;A<n;A++){if(h[A]=="null"||h[A]===null){h[A]=null}else{h[A]=Number(h[A]);l.push(Number(h[A]))}}var z=Math.max.apply(Math,l);var u=Math.min.apply(Math,l);if(k.chartRangeMin!=undefined&&(k.chartRangeClip||k.chartRangeMin<u)){u=k.chartRangeMin}if(k.chartRangeMax!=undefined&&(k.chartRangeClip||k.chartRangeMax>z)){z=k.chartRangeMax}if(k.zeroAxis==undefined){k.zeroAxis=u<0}var q=z-u==0?1:z-u;if(f.isArray(k.colorMap)){var m=k.colorMap;var s=null}else{var m=null;var s=k.colorMap}var C=f(this).simpledraw(t,r,k.composite);if(C){var B=C.pixel_width;var w=C.pixel_height;var j=u<0&&k.zeroAxis?w-Math.round(w*(Math.abs(u)/q))-1:w-1;for(var A=0,n=h.length;A<n;A++){var p=A*(k.barWidth+k.barSpacing);var D=h[A];if(D===null){if(k.nullColor){v=k.nullColor;D=(k.zeroAxis&&u<0)?0:u;var r=1;var o=(k.zeroAxis&&u<0)?j:w-r}else{continue}}else{if(D<u){D=u}if(D>z){D=z}var v=(D<0)?k.negBarColor:k.barColor;if(k.zeroAxis&&u<0){var r=Math.round(w*((Math.abs(D)/q)))+1;var o=(D<0)?j:j-r}else{var r=Math.round(w*((D-u)/q))+1;var o=w-r}if(D==0&&k.zeroColor!=undefined){v=k.zeroColor}if(s&&s[D]){v=s[D]}else{if(m&&m.length>A){v=m[A]}}if(v===null){continue}}C.drawRect(p,o,k.barWidth-1,r-1,v,v)}}else{this.innerHTML=""}};f.fn.sparkline.tristate=function(u,w,j,v){u=f.map(u,Number);var w=f.extend({barWidth:4,barSpacing:1,posBarColor:"#6f6",negBarColor:"#f44",zeroBarColor:"#999",colorMap:{}},w);var j=(u.length*w.barWidth)+((u.length-1)*w.barSpacing);if(f.isArray(w.colorMap)){var n=w.colorMap;var t=null}else{var n=null;var t=w.colorMap}var o=f(this).simpledraw(j,v,w.composite);if(o){var p=o.pixel_width;var h=o.pixel_height;var m=Math.round(h/2);for(var l=0,s=u.length;l<s;l++){var r=l*(w.barWidth+w.barSpacing);if(u[l]<0){var q=m;var v=m-1;var k=w.negBarColor}else{if(u[l]>0){var q=0;var v=m-1;var k=w.posBarColor}else{var q=m-1;var v=2;var k=w.zeroBarColor}}if(t&&t[u[l]]){k=t[u[l]]}else{if(n&&n.length>l){k=n[l]}}if(k===null){continue}o.drawRect(r,q,w.barWidth-1,v-1,k,k)}}else{this.innerHTML=""}};f.fn.sparkline.discrete=function(h,j,r,q){h=f.map(h,Number);var j=f.extend({lineHeight:"auto",thresholdColor:undefined,thresholdValue:0,chartRangeMax:undefined,chartRangeMin:undefined,chartRangeClip:false},j);r=j.width=="auto"?h.length*2:r;var y=Math.floor(r/h.length);var z=f(this).simpledraw(r,q,j.composite);if(z){var w=z.pixel_width;var t=z.pixel_height;var n=j.lineHeight=="auto"?Math.round(t*0.3):j.lineHeight;var l=t-n;var s=Math.min.apply(Math,h);var u=Math.max.apply(Math,h);if(j.chartRangeMin!=undefined&&(j.chartRangeClip||j.chartRangeMin<s)){s=j.chartRangeMin}if(j.chartRangeMax!=undefined&&(j.chartRangeClip||j.chartRangeMax>u)){u=j.chartRangeMax}var o=u-s;for(var v=0,k=h.length;v<k;v++){var A=h[v];if(A<s){A=s}if(A>u){A=u}var m=(v*y);var p=Math.round(l-l*((A-s)/o));z.drawLine(m,p,m,p+n,(j.thresholdColor&&A<j.thresholdValue)?j.thresholdColor:j.lineColor)}}else{this.innerHTML=""}};f.fn.sparkline.bullet=function(k,m,t,r){k=f.map(k,Number);var m=f.extend({targetColor:"red",targetWidth:3,performanceColor:"blue",rangeColors:["#D3DAFE","#A8B6FF","#7F94FF"],base:undefined},m);t=m.width=="auto"?"4.0em":t;var A=f(this).simpledraw(t,r,m.composite);if(A&&k.length>1){var z=A.pixel_width-Math.ceil(m.targetWidth/2);var v=A.pixel_height;var u=Math.min.apply(Math,k);var w=Math.max.apply(Math,k);if(m.base==undefined){var u=u<0?u:0}else{u=m.base}var p=w-u;for(i=2,vlen=k.length;i<vlen;i++){var n=parseInt(k[i]);var j=Math.round(z*((n-u)/p));A.drawRect(0,0,j-1,v-1,m.rangeColors[i-2],m.rangeColors[i-2])}var s=parseInt(k[1]);var h=Math.round(z*((s-u)/p));A.drawRect(0,Math.round(v*0.3),h-1,Math.round(v*0.4)-1,m.performanceColor,m.performanceColor);var q=parseInt(k[0]);var o=Math.round(z*((q-u)/p)-(m.targetWidth/2));var l=Math.round(v*0.1);var y=v-(l*2);A.drawRect(o,l,m.targetWidth-1,y-1,m.targetColor,m.targetColor)}else{this.innerHTML=""}};f.fn.sparkline.pie=function(u,w,l,v){u=f.map(u,Number);var w=f.extend({sliceColors:["#f00","#0f0","#00f"]},w);l=w.width=="auto"?v:l;var q=f(this).simpledraw(l,v,w.composite);if(q&&u.length>1){var r=q.pixel_width;var h=q.pixel_height;var p=Math.floor(Math.min(r,h)/2);var s=0;for(var n=0,t=u.length;n<t;n++){s+=u[n]}var o=0;if(w.offset){o+=(2*Math.PI)*(w.offset/360)}var j=2*Math.PI;for(var n=0,t=u.length;n<t;n++){var k=o;var m=o;if(s>0){m=o+(j*(u[n]/s))}q.drawPieSlice(p,p,p,k,m,undefined,w.sliceColors[n%w.sliceColors.length]);o=m}}};function a(j,k){if(k==2){var h=Math.floor(j.length/2);return j.length%2?j[h]:(j[h]+j[h+1])/2}else{var l=Math.floor(j.length/4);return j.length%2?(j[l*k]+j[l*k+1])/2:j[l*k]}}f.fn.sparkline.box=function(j,l,u,t){j=f.map(j,Number);var l=f.extend({raw:false,boxLineColor:"black",boxFillColor:"#cdf",whiskerColor:"black",outlierLineColor:"#333",outlierFillColor:"white",medianColor:"red",showOutliers:true,outlierIQR:1.5,spotRadius:1.5,target:undefined,targetColor:"#4a2",chartRangeMax:undefined,chartRangeMin:undefined},l);u=l.width=="auto"?"4.0em":u;minvalue=l.chartRangeMin==undefined?Math.min.apply(Math,j):l.chartRangeMin;maxvalue=l.chartRangeMax==undefined?Math.max.apply(Math,j):l.chartRangeMax;var B=f(this).simpledraw(u,t,l.composite);if(B&&j.length>1){var y=B.pixel_width;var v=B.pixel_height;if(l.raw){if(l.showOutliers&&j.length>5){var z=j[0],r=j[1],q=j[2],p=j[3],o=j[4],h=j[5],m=j[6]}else{var r=j[0],q=j[1],p=j[2],o=j[3],h=j[4]}}else{j.sort(function(D,C){return D-C});var q=a(j,1);var p=a(j,2);var o=a(j,3);var k=o-q;if(l.showOutliers){var r=undefined,h=undefined;for(var w=0,n=j.length;w<n;w++){if(r==undefined&&j[w]>q-(k*l.outlierIQR)){r=j[w]}if(j[w]<o+(k*l.outlierIQR)){h=j[w]}}var z=j[0];var m=j[j.length-1]}else{var r=j[0];var h=j[j.length-1]}}var A=y/(maxvalue-minvalue+1);var x=0;if(l.showOutliers){x=Math.ceil(l.spotRadius);y-=2*Math.ceil(l.spotRadius);var A=y/(maxvalue-minvalue+1);if(z<r){B.drawCircle((z-minvalue)*A+x,v/2,l.spotRadius,l.outlierLineColor,l.outlierFillColor)}if(m>h){B.drawCircle((m-minvalue)*A+x,v/2,l.spotRadius,l.outlierLineColor,l.outlierFillColor)}}B.drawRect(Math.round((q-minvalue)*A+x),Math.round(v*0.1),Math.round((o-q)*A),Math.round(v*0.8),l.boxLineColor,l.boxFillColor);B.drawLine(Math.round((r-minvalue)*A+x),Math.round(v/2),Math.round((q-minvalue)*A+x),Math.round(v/2),l.lineColor);B.drawLine(Math.round((r-minvalue)*A+x),Math.round(v/4),Math.round((r-minvalue)*A+x),Math.round(v-v/4),l.whiskerColor);B.drawLine(Math.round((h-minvalue)*A+x),Math.round(v/2),Math.round((o-minvalue)*A+x),Math.round(v/2),l.lineColor);B.drawLine(Math.round((h-minvalue)*A+x),Math.round(v/4),Math.round((h-minvalue)*A+x),Math.round(v-v/4),l.whiskerColor);B.drawLine(Math.round((p-minvalue)*A+x),Math.round(v*0.1),Math.round((p-minvalue)*A+x),Math.round(v*0.9),l.medianColor);if(l.target){var s=Math.ceil(l.spotRadius);B.drawLine(Math.round((l.target-minvalue)*A+x),Math.round((v/2)-s),Math.round((l.target-minvalue)*A+x),Math.round((v/2)+s),l.targetColor);B.drawLine(Math.round((l.target-minvalue)*A+x-s),Math.round(v/2),Math.round((l.target-minvalue)*A+x+s),Math.round(v/2),l.targetColor)}}else{this.innerHTML=""}};if(!Array.prototype.indexOf){Array.prototype.indexOf=function(j){for(var h=0,k=this.length;h<k;h++){if(this[h]==j){return h}}return -1}}if(f.browser.msie&&!document.namespaces.v){document.namespaces.add("v","urn:schemas-microsoft-com:vml","#default#VML")}if(f.browser.hasCanvas==undefined){var b=document.createElement("canvas");f.browser.hasCanvas=b.getContext!=undefined}var e=function(j,h,k){};e.prototype={init:function(j,h,k){this.width=j;this.height=h;this.target=k;if(k[0]){k=k[0]}k.vcanvas=this},drawShape:function(k,j,l,h){alert("drawShape not implemented")},drawLine:function(k,m,j,l,n,h){return this.drawShape([[k,m],[j,l]],n,h)},drawCircle:function(j,m,h,k,l){alert("drawCircle not implemented")},drawPieSlice:function(j,o,h,l,k,m,n){alert("drawPieSlice not implemented")},drawRect:function(j,n,k,h,l,m){alert("drawRect not implemented")},getElement:function(){return this.canvas},_insert:function(h,j){f(j).html(h)}};var c=function(j,h,k){return this.init(j,h,k)};c.prototype=f.extend(new e,{_super:e.prototype,init:function(j,h,k){this._super.init(j,h,k);this.canvas=document.createElement("canvas");if(k[0]){k=k[0]}k.vcanvas=this;f(this.canvas).css({display:"inline-block",width:j,height:h,verticalAlign:"top"});this._insert(this.canvas,k);this.pixel_height=f(this.canvas).height();this.pixel_width=f(this.canvas).width();this.canvas.width=this.pixel_width;this.canvas.height=this.pixel_height;f(this.canvas).css({width:this.pixel_width,height:this.pixel_height})},_getContext:function(k,l,h){var j=this.canvas.getContext("2d");if(k!=undefined){j.strokeStyle=k}j.lineWidth=h==undefined?1:h;if(l!=undefined){j.fillStyle=l}return j},drawShape:function(n,m,o,h){var k=this._getContext(m,o,h);k.beginPath();k.moveTo(n[0][0]+0.5,n[0][1]+0.5);for(var j=1,l=n.length;j<l;j++){k.lineTo(n[j][0]+0.5,n[j][1]+0.5)}if(m!=undefined){k.stroke()}if(o!=undefined){k.fill()}},drawCircle:function(j,n,h,l,m){var k=this._getContext(l,m);k.beginPath();k.arc(j,n,h,0,2*Math.PI,false);if(l!=undefined){k.stroke()}if(m!=undefined){k.fill()}},drawPieSlice:function(j,p,h,m,k,n,o){var l=this._getContext(n,o);l.beginPath();l.moveTo(j,p);l.arc(j,p,h,m,k,false);l.lineTo(j,p);l.closePath();if(n!=undefined){l.stroke()}if(o){l.fill()}},drawRect:function(j,n,k,h,l,m){return this.drawShape([[j,n],[j+k,n],[j+k,n+h],[j,n+h],[j,n]],l,m)}});var d=function(j,h,k){return this.init(j,h,k)};d.prototype=f.extend(new e,{_super:e.prototype,init:function(j,h,l){this._super.init(j,h,l);if(l[0]){l=l[0]}l.vcanvas=this;this.canvas=document.createElement("span");f(this.canvas).css({display:"inline-block",position:"relative",overflow:"hidden",width:j,height:h,margin:"0px",padding:"0px",verticalAlign:"top"});this._insert(this.canvas,l);this.pixel_height=f(this.canvas).height();this.pixel_width=f(this.canvas).width();this.canvas.width=this.pixel_width;this.canvas.height=this.pixel_height;var k='<v:group coordorigin="0 0" coordsize="'+this.pixel_width+" "+this.pixel_height+'" style="position:absolute;top:0;left:0;width:'+this.pixel_width+"px;height="+this.pixel_height+'px;"></v:group>';this.canvas.insertAdjacentHTML("beforeEnd",k);this.group=f(this.canvas).children()[0]},drawShape:function(t,o,h,l){var p=[];for(var k=0,j=t.length;k<j;k++){p[k]=""+(t[k][0])+","+(t[k][1])}var n=p.splice(0,1);l=l==undefined?1:l;var s=o==undefined?' stroked="false" ':' strokeWeight="'+l+'" strokeColor="'+o+'" ';var r=h==undefined?' filled="false"':' fillColor="'+h+'" filled="true" ';var m=p[0]==p[p.length-1]?"x ":"";var q='<v:shape coordorigin="0 0" coordsize="'+this.pixel_width+" "+this.pixel_height+'" '+s+r+' style="position:absolute;left:0px;top:0px;height:'+this.pixel_height+"px;width:"+this.pixel_width+'px;padding:0px;margin:0px;"  path="m '+n+" l "+p.join(", ")+" "+m+'e"> </v:shape>';this.group.insertAdjacentHTML("beforeEnd",q)},drawCircle:function(j,p,h,n,o){j-=h+1;p-=h+1;var m=n==undefined?' stroked="false" ':' strokeWeight="1" strokeColor="'+n+'" ';var l=o==undefined?' filled="false"':' fillColor="'+o+'" filled="true" ';var k="<v:oval "+m+l+' style="position:absolute;top:'+p+"px; left:"+j+"px; width:"+(h*2)+"px; height:"+(h*2)+'px"></v:oval>';this.group.insertAdjacentHTML("beforeEnd",k)},drawPieSlice:function(t,r,o,p,l,s,k){if(p==l){return}if((l-p)==(2*Math.PI)){p=0;l=(2*Math.PI)}var j=t+Math.round(Math.cos(p)*o);var h=r+Math.round(Math.sin(p)*o);var n=t+Math.round(Math.cos(l)*o);var m=r+Math.round(Math.sin(l)*o);if(j==n&&h==m&&(l-p)<Math.PI){return}var q=[t-o,r-o,t+o,r+o,j,h,n,m];var w=s==undefined?' stroked="false" ':' strokeWeight="1" strokeColor="'+s+'" ';var v=k==undefined?' filled="false"':' fillColor="'+k+'" filled="true" ';var u='<v:shape coordorigin="0 0" coordsize="'+this.pixel_width+" "+this.pixel_height+'" '+w+v+' style="position:absolute;left:0px;top:0px;height:'+this.pixel_height+"px;width:"+this.pixel_width+'px;padding:0px;margin:0px;"  path="m '+t+","+r+" wa "+q.join(", ")+' x e"> </v:shape>';this.group.insertAdjacentHTML("beforeEnd",u)},drawRect:function(j,n,k,h,l,m){return this.drawShape([[j,n],[j,n+h],[j+k,n+h],[j+k,n],[j,n]],l,m)}})})(jQuery);